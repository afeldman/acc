&ACCESS RVP
DEF control_flow()
  ; KRL Control Flow Example
  
  DECL INT mode
  DECL BOOL sensor_active
  DECL INT loop_count
  
  ; IF-THEN-ELSE
  IF $IN[1] == TRUE THEN
    mode = 1
  ELSE
    mode = 0
  ENDIF
  
  ; SWITCH-CASE
  SWITCH mode
    CASE 0
      HALT
    CASE 1
      $OUT[1] = TRUE
    CASE 2
      $OUT[2] = TRUE
    DEFAULT
      $OUT[3] = TRUE
  ENDSWITCH
  
  ; FOR loop
  FOR loop_count = 1 TO 5 STEP 1
    WAIT SEC 0.1
    IF $IN[2] == TRUE THEN
      EXIT
    ENDIF
  ENDFOR
  
  ; WHILE loop
  sensor_active = TRUE
  WHILE sensor_active == TRUE
    sensor_active = $IN[3]
    WAIT SEC 0.05
  ENDWHILE
  
  ; REPEAT-UNTIL
  REPEAT
    WAIT SEC 0.1
  UNTIL $IN[4] == TRUE
  
  ; LOOP with EXIT
  loop_count = 0
  LOOP
    loop_count = loop_count + 1
    IF loop_count > 10 THEN
      EXIT
    ENDIF
    WAIT SEC 0.1
  ENDLOOP
  
END
